<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `input` crate."><meta name="keywords" content="rust, rustlang, rust-lang, input"><title>input - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../input/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate input</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all input's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'input', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/input/lib.rs.html#1-232' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>input</a></span></h1><div class='docblock'><h1 id="libinput-bindings-for-rust" class="section-header"><a href="#libinput-bindings-for-rust">Libinput bindings for rust</a></h1>
<p>These bindings closely follow libinput's concepts and it's original API.
Please refer to the <a href="https://wayland.freedesktop.org/libinput/doc/latest/">libinput documentation</a>
to understand the general structure and concepts.</p>
<h2 id="differences-to-the-c-library" class="section-header"><a href="#differences-to-the-c-library">Differences to the C-Library:</a></h2>
<ul>
<li>Refcounting does not need to be done manually. Just call <code>clone</code> when you need an additional reference.</li>
<li>Libinput logging cannot (currently) not be customized.</li>
</ul>
<h2 id="userdata-handling" class="section-header"><a href="#userdata-handling">Userdata handling</a></h2>
<p>Multiple types in the libinput library allow to attach a pointer of an arbitrary type, so called <code>userdata</code>.
Using this data is unsafe as there is no way to find out what type is stored in the libinput struct.
Additionally multiple references to the same libinput object may exist and userdata may be shared mutably.</p>
<p>This is why using and setting userdata is an unsafe operation (except when creating an object).</p>
<p>If you heavily rely on userdata, you should always stored them wrapped in a <code>Mutex</code> and use the same
type for every userdata access to further simplify usage.</p>
<p>You need to be especially cautious when initializing libinput types from raw pointers, you obtained
from other libraries which may set their own userdata. If accessing their userdata make sure no shared
mutable access may happen and don't store something else instead, if the library does not explicitly
allow this.</p>
<p>Generally usage of this api is error-prone and discouraged if not needed.</p>
<h2 id="getting-started" class="section-header"><a href="#getting-started">Getting started</a></h2>
<p>To get started check out the <a href="./struct.Libinput.html"><code>Libinput</code> struct</a>.</p>
<p>Here's a small example that prints all events:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">input</span>;
<span class="kw">use</span> <span class="ident">input</span>::{<span class="ident">Libinput</span>, <span class="ident">LibinputInterface</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">fs</span>::{<span class="ident">File</span>, <span class="ident">OpenOptions</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">fs</span>::<span class="ident">OpenOptionsExt</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">io</span>::{<span class="ident">RawFd</span>, <span class="ident">FromRawFd</span>, <span class="ident">IntoRawFd</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">path</span>::<span class="ident">Path</span>;
 
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">libc</span>;
<span class="kw">use</span> <span class="ident">libc</span>::{<span class="ident">O_RDONLY</span>, <span class="ident">O_RDWR</span>, <span class="ident">O_WRONLY</span>};
 
<span class="kw">struct</span> <span class="ident">Interface</span>;
 
<span class="kw">impl</span> <span class="ident">LibinputInterface</span> <span class="kw">for</span> <span class="ident">Interface</span> {
	<span class="kw">fn</span> <span class="ident">open_restricted</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">path</span>: <span class="kw-2">&amp;</span><span class="ident">Path</span>, <span class="ident">flags</span>: <span class="ident">i32</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">RawFd</span>, <span class="ident">i32</span><span class="op">&gt;</span> {
		<span class="ident">OpenOptions</span>::<span class="ident">new</span>()
		    .<span class="ident">custom_flags</span>(<span class="ident">flags</span>)
		    .<span class="ident">read</span>((<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_RDONLY</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>) <span class="op">|</span> (<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_RDWR</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>))
		    .<span class="ident">write</span>((<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_WRONLY</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>) <span class="op">|</span> (<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_RDWR</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>))
			.<span class="ident">open</span>(<span class="ident">path</span>)
			.<span class="ident">map</span>(<span class="op">|</span><span class="ident">file</span><span class="op">|</span> <span class="ident">file</span>.<span class="ident">into_raw_fd</span>())
			.<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> <span class="ident">err</span>.<span class="ident">raw_os_error</span>().<span class="ident">unwrap</span>())
	}
	<span class="kw">fn</span> <span class="ident">close_restricted</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">fd</span>: <span class="ident">RawFd</span>) {
		<span class="kw">unsafe</span> {
			<span class="ident">File</span>::<span class="ident">from_raw_fd</span>(<span class="ident">fd</span>);
		}
	}
}
 
<span class="kw">fn</span> <span class="ident">main</span>() {
	<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">input</span> <span class="op">=</span> <span class="ident">Libinput</span>::<span class="ident">new_with_udev</span>(<span class="ident">Interfacep</span>());
	<span class="ident">input</span>.<span class="ident">udev_assign_seat</span>(<span class="string">&quot;seat0&quot;</span>).<span class="ident">unwrap</span>();
	<span class="kw">loop</span> {
		<span class="ident">input</span>.<span class="ident">dispatch</span>().<span class="ident">unwrap</span>();
		<span class="kw">for</span> <span class="ident">event</span> <span class="kw">in</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">input</span> {
			<span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Got event: {:?}&quot;</span>, <span class="ident">event</span>);
		}
	}
}</pre></div>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use event::<a class="enum" href="../input/event/enum.Event.html" title="enum input::event::Event">Event</a>;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="event/index.html" title='input::event mod'>event</a></td><td class='docblock-short'><p>Libinput Events</p>
</td></tr><tr class='module-item'><td><a class="mod" href="ffi/index.html" title='input::ffi mod'>ffi</a></td><td class='docblock-short'><p>Unsafe c-api.</p>
</td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Device.html" title='input::Device struct'>Device</a></td><td class='docblock-short'><p>Representation of a single input device as seen by the kernel.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.DeviceGroup.html" title='input::DeviceGroup struct'>DeviceGroup</a></td><td class='docblock-short'><p>Device group</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Led.html" title='input::Led struct'>Led</a></td><td class='docblock-short'><p>Mask reflecting LEDs on a device.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Libinput.html" title='input::Libinput struct'>Libinput</a></td><td class='docblock-short'><p>Libinput context</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Seat.html" title='input::Seat struct'>Seat</a></td><td class='docblock-short'><p>A seat has two identifiers, the physical name and the logical name.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.SendEventsMode.html" title='input::SendEventsMode struct'>SendEventsMode</a></td><td class='docblock-short'><p>The send-event mode of a device defines when a device may generate
events and pass those events to the caller.</p>
</td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.AccelProfile.html" title='input::AccelProfile enum'>AccelProfile</a></td><td class='docblock-short'><p>Pointer Acceleration Profile</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.ClickMethod.html" title='input::ClickMethod enum'>ClickMethod</a></td><td class='docblock-short'><p>The click method defines when to generate software-emulated
buttons, usually on a device that does not have a specific
physical button available.</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.DeviceCapability.html" title='input::DeviceCapability enum'>DeviceCapability</a></td><td class='docblock-short'><p>Capabilities on a device.</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.DeviceConfigError.html" title='input::DeviceConfigError enum'>DeviceConfigError</a></td><td class='docblock-short'><p>Errors returned when applying configuration settings.</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.ScrollMethod.html" title='input::ScrollMethod enum'>ScrollMethod</a></td><td class='docblock-short'><p>The scroll method of a device selects when to generate scroll axis
events instead of pointer motion events.</p>
</td></tr><tr class='module-item'><td><a class="enum" href="enum.TapButtonMap.html" title='input::TapButtonMap enum'>TapButtonMap</a></td><td class='docblock-short'><p>Map 1/2/3 finger tips to buttons</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.AsRaw.html" title='input::AsRaw trait'>AsRaw</a></td><td class='docblock-short'><p>Trait for types that allow to optain the underlying raw libinput pointer.</p>
</td></tr><tr class='module-item'><td><a class="trait" href="trait.Context.html" title='input::Context trait'>Context</a></td><td class='docblock-short'><p>Trait to receive the underlying context</p>
</td></tr><tr class='module-item'><td><a class="trait" href="trait.FromRaw.html" title='input::FromRaw trait'>FromRaw</a></td><td class='docblock-short'><p>Trait for types that allow to be initialized from a raw pointer</p>
</td></tr><tr class='module-item'><td><a class="trait" href="trait.LibinputInterface.html" title='input::LibinputInterface trait'>LibinputInterface</a></td><td class='docblock-short'><p>libinput does not open file descriptors to devices directly,
instead <code>open_restricted</code> and <code>close_restricted</code> are called for
each path that must be opened.</p>
</td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.DeviceConfigResult.html" title='input::DeviceConfigResult type'>DeviceConfigResult</a></td><td class='docblock-short'><p>Result returned when applying configuration settings.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "input";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>